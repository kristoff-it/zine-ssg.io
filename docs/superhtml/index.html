<!DOCTYPE html>
<html>
  <head id="head">
    <meta charset="UTF-8">
    <meta name="description" content="Zine: Fast, Scalable and Flexible Static Site Generator">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@croloris">
    <meta name="twitter:author" content="@croloris">
    <meta name="twitter:description" content="Zine: Fast, Scalable and Flexible Static Site Generator">
    <meta name="twitter:title" content="SuperHTML Basics | Zine">
    <meta name="twitter:image" content="https://zine-ssg.io/preview.png">
    <meta property="og:type" content="website">
    <meta property="og:title" content="SuperHTML Basics | Zine">
    <meta property="og:image" content="https://zine-ssg.io/preview.png">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title id="title">
      SuperHTML Basics
      - Zine
    </title>
    <link rel="stylesheet" type="text/css" href="/fonts.css">
    <link rel="stylesheet" type="text/css" href="/fira_code.css">
    <link rel="stylesheet" type="text/css" href="/style.css">
    <link rel="stylesheet" type="text/css" href="/highlight.css">
    
  </head>
  <body>
    <nav id="menu" class="centered">
      <a href="/">Home</a>
      •
      <a href="/quickstart/">Get Started</a>
      •
      <a href="/docs/">Documentation</a>
      •
      <a href="/community/">Community</a>
      •
      <a href="/log/">Devlog</a>
      •
      <a href="https://github.com/kristoff-it/zine" target="_blank">
        Code
      </a>
    </nav>
    <div id="content">
      
  <style>
    h3.overtitle {
       margin-bottom: 0;
     }
     h1.title {
       margin-top: 0;
     }

		#page h2, #page h3 {
			text-align: left;
		}

		#page h2 {
			font-size: 1.7rem;
			border-bottom: 1px dashed #aaa;
			margin-top: 2em;
		}

		#page h3 {
			font-size: 1.5rem;
		}
    
		#page h4 {
			font-size: 1rem;
		}
  </style>
  <h3 class="overtitle centered">Zine</h3>
  <h1 class="title">SuperHTML Basics</h1>
  <div id="page"><h2>Intro</h2><p><strong>Make sure to read <a href="/docs/scripty/">Scripty Basics</a> first.</strong></p><p>SuperHTML is a templating language for HTML that uses Scripty to express templating logic.</p><p>There is <a href="https://gohugo.io/templates/introduction/" target="_blank">a</a> <a href="https://mustache.github.io/" target="_blank">borderline</a> <a href="https://handlebarsjs.com/" target="_blank">infinite</a> <a href="https://jinja.palletsprojects.com/" target="_blank">number</a> <a href="https://github.com/ruby/erb" target="_blank">of</a> HTML templating languages, but the majority of those used by static site generators are a form of <code>{{ curly braced }}</code> macro system that preprocesses the HTML code as unstructured text.</p><p>This “macro” approach has the upside of making it possible to use the same templating language for other file formats (you <em>can</em> use Jinja to template CSV files, for example), but it also has a variety of downsides.</p><p>The most important downside is that it makes it unnecessarily easy to generate HTML in an unstructured manner:</p><ul><li>making it harder for humans to understand what the templating logic is doing</li><li>making it easier for humans to output malformed html</li><li>making it prohibitively complex for tooling to catch mistakes statically (i.e. in your editor)</li></ul><p>The following is an extremely tame example of what is possible with curly braced templating languages:</p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">a</span> <span class="attribute">href</span>=&quot;<span class="string">baz</span>&quot;<span class="punctuation bracket">&gt;</span>
{{ if .Foo }}
  <span class="punctuation bracket">&lt;/</span><span class="tag">a</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;</span><span class="tag">a</span> <span class="attribute">href</span>=&quot;<span class="string">foo</span>&quot;<span class="punctuation bracket">&gt;</span>
{{ end }}
<span class="punctuation bracket">&lt;/</span><span class="tag">a</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>This example can’t be recreated faithfully in SuperHTML because it operates within the limits of well-formed HTML.</p><h3>Design Goals</h3><p>SuperHTML is designed to help you write correct HTML by catching mistakes early.</p><p>It is <a href="/community/">my</a> belief that people resort to using JSX for creating static websites even when they don’t really have any frontend SPA (Single Page Application) need because the experience of editing vanilla HTML is objectively worse.</p><p>To this point: as part of my work to create SuperHTML, I wrote an HTML parser from scratch that then I used to implement a <a href="https://github.com/kristoff-it/superhtml" target="_blank">language server for HTML</a>.</p><p>While doing so I discovered that, <strong>as of spring of 2024, no other HTML language server that reports syntax errors exists</strong>.</p><p>Some proprietary text editors do have support for reporting HTML syntax errors, and one HTML language server does exist: the one that comes with VSCode (also used by other editors), but it doesn’t report errors for malformed HTML.</p><h2>File Extension</h2><p>SuperHTML files have a <code>.shtml</code> file extension.</p><h2>Developer Tooling</h2><p>SuperHTML has both dedicated grammars for syntax highlighting and a language server for receiving immediate feedback on syntax errors.</p><p><strong>The SuperHTML language server also supports normal HTML.</strong></p><div class="block nopara"><h1>Diagnostics</h1><p><img src="/superhtml.png" alt=""></p></div><p>The language server also has a Zig-style autoformatter:</p><div class="block nopara"><h1>Autoformatting</h1><p><video class="big " loop autoplay muted controls disablepictureinpicture>
<source src="/vscode-autoformatting.mp4">
</video></p></div><p>Checkout <a href="https://github.com/kristoff-it/superhtml" target="_blank">kristoff-it/superhtml</a> for detailed setup information.</p><h2>Scripting Attributes</h2><p>The main way of expressing logic in SuperHTML is by giving Scripty expressions to HTML attributes.</p><p>Any HTML attribute can be scripted (with some restrictions explained later in this page).</p><p><em><strong>template.shtml</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">h1</span> <span class="attribute">class</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.title.len().gt(25).then(&apos;long&apos;)</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>...<span class="punctuation bracket">&lt;/</span><span class="special">h1</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>output</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">h1</span> <span class="attribute">class</span>=&quot;<span class="string">long</span>&quot;<span class="punctuation bracket">&gt;</span>...<span class="punctuation bracket">&lt;/</span><span class="tag">h1</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<h2 id="attributes">Logic Attributes</h2><p>SuperHTML defines a list of special attributes that drive templating logic.</p><h3><code>:text</code></h3><p>The <code>:text</code> attribute sets the content of an element to the result of its Scripty expression. The value is HTML-escaped before printing.</p><p>The expression must evaluate to either <a href="/docs/superhtml/scripty/#String"><code>String</code></a> or <a href="/docs/superhtml/scripty/#Int"><code>Int</code></a>.</p><p>Requires the element to have an empty body.</p><p><em><strong>template.shtml</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">div</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>output</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>Page Title<span class="punctuation bracket">&lt;/</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<h3><code>:html</code></h3><p>Same as <code>:text</code>, but it doesn’t escape HTML. Avoid using it with untrusted data.</p><p><em><strong>template.shtml</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">div</span> <span class="attribute">:html</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.content()</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>output</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">h1</span><span class="punctuation bracket">&gt;</span>Page Title<span class="punctuation bracket">&lt;/</span><span class="tag">h1</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">p</span><span class="punctuation bracket">&gt;</span>Lorem Ipsum<span class="punctuation bracket">&lt;/</span><span class="tag">p</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<h3><code>:if</code></h3><p>Toggles the body of an element based on the value of its Scripty expression.</p><p>The expression must evaluate to either <a href="/docs/superhtml/scripty/#Bool"><code>Bool</code></a> or <a href="/docs/superhtml/scripty/#any"><code>?any</code></a>.</p><p>The second kind of value (<code>?any</code>) is an <em>optional</em> value. You can get an optional value for example by trying to access a custom field in a page frontmatter, or when trying to access the <code>next</code> page.</p><p>Optional values can either be present or missing.</p><p>When the value is missing, the <code>:if</code> attribute evaluates to <code>false</code> and the body of the element is elided.</p><p>When the value is present, it becomes available as the <a href="/docs/superhtml/scripty/"><code>$if</code></a> Scripty global variable.</p><p><em><strong>template.shtml</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">div</span> <span class="attribute">:if</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.draft.not()</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">span</span><span class="punctuation bracket">&gt;</span>won&apos;t be printed<span class="punctuation bracket">&lt;/</span><span class="special">span</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="special">div</span> <span class="attribute">:if</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.next?()</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
  Next: <span class="punctuation bracket">&lt;</span><span class="tag">span</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$if.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">span</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>output</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
  Next: <span class="punctuation bracket">&lt;</span><span class="tag">span</span><span class="punctuation bracket">&gt;</span>Other Page Title<span class="punctuation bracket">&lt;/</span><span class="tag">span</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<h3><code>:loop</code></h3><p>Evaluates the body of an element once for every element in the value of its Scripty expression.</p><p>The expression must evaluate to <code>[any]</code>.</p><p>The iterator becomes available as the <a href="/docs/superhtml/scripty/"><code>$loop</code></a> Scripty global variable.</p><p><em><strong>template.shtml</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">ul</span> <span class="attribute">:loop</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.subpages()</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">li</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="special">a</span> <span class="attribute">href</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$loop.it.link()</span><span class="string">&quot;</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$loop.it.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">a</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;/</span><span class="special">li</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">ul</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>output</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">ul</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">li</span><span class="punctuation bracket">&gt;</span> <span class="punctuation bracket">&lt;</span><span class="tag">a</span> <span class="attribute">href</span>=&quot;<span class="string">page1/</span>&quot;<span class="punctuation bracket">&gt;</span>Page 1<span class="punctuation bracket">&lt;/</span><span class="tag">a</span><span class="punctuation bracket">&gt;</span> <span class="punctuation bracket">&lt;/</span><span class="tag">li</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">li</span><span class="punctuation bracket">&gt;</span> <span class="punctuation bracket">&lt;</span><span class="tag">a</span> <span class="attribute">href</span>=&quot;<span class="string">page2/</span>&quot;<span class="punctuation bracket">&gt;</span>Page 2<span class="punctuation bracket">&lt;/</span><span class="tag">a</span><span class="punctuation bracket">&gt;</span> <span class="punctuation bracket">&lt;/</span><span class="tag">li</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">li</span><span class="punctuation bracket">&gt;</span> <span class="punctuation bracket">&lt;</span><span class="tag">a</span> <span class="attribute">href</span>=&quot;<span class="string">page2/</span>&quot;<span class="punctuation bracket">&gt;</span>Page 3<span class="punctuation bracket">&lt;/</span><span class="tag">a</span><span class="punctuation bracket">&gt;</span> <span class="punctuation bracket">&lt;/</span><span class="tag">li</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag">ul</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>In nested loops the inner iterator will shadow the outer <code>$loop</code>, but you can use <a href="/docs/superhtml/scripty/#Iterator"><code>$loop.up()</code></a> to access it.</p><h2>Elements</h2><p>SuperHTML also defines a small number of custom elements.</p><h3><code>&lt;ctx&gt;</code></h3><p>This element supports all the logic attributes but has the property that its start/end tags will not be rendered.</p><p>One use of this property is to put text at a specific location of an element:</p><p><em><strong>template.shtml</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
  Created by: <span class="punctuation bracket">&lt;</span><span class="special">ctx</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.author</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag error">ctx</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>output</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
  Created by: Loris Cro
<span class="punctuation bracket">&lt;/</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>A second important property of <code>&lt;ctx&gt;</code> is that any attribute defined on it will become available as a field of the <a href="/docs/superhtml/scripty/#Ctx"><code>$ctx</code></a> Scripty global variable.</p><p><em><strong>template.shtml</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">ctx</span> <span class="attribute">about</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$site.page(&apos;about&apos;)</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">a</span> <span class="attribute">href</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$ctx.about.link()</span><span class="string">&quot;</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$ctx.about.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">a</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag error">ctx</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>output</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">a</span> <span class="attribute">href</span>=&quot;<span class="string">about/</span>&quot;<span class="punctuation bracket">&gt;</span>About<span class="punctuation bracket">&lt;/</span><span class="tag">a</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>Nested instances of <code>&lt;ctx&gt;</code> will have all their attributes merged in <code>$ctx</code> (i.e. there is no <code>up</code> function).</p><p>Shadowing is not allowed for <code>&lt;ctx&gt;</code> attributes and will be reported as an error if two definitions of the same attribute are active in the same scope.</p><h3><code>&lt;super&gt;</code></h3><p>Used to define template extension hierarchies, see the next section for more information.</p><h3><code>&lt;extend&gt;</code></h3><p>Used to define template extension hierarchies, see the next section for more information.</p><h2>Extending templates</h2><p>Let’s continue the example from the main documentation page, where we wanted to collect all common boilerplate from <code>homepage.shtml</code> and <code>page.shtml</code> into a single file.</p><p><strong><code>layouts/templates/base.shtml</code></strong></p><pre><code class="superhtml"><span class="constant">&lt;!DOCTYPE html&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="special">html</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="special">head</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="special">meta</span> <span class="attribute">charset</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">UTF-8</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="special">title</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;</span><span class="tag">super</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">title</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;/</span><span class="special">head</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="special">body</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">main</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">super</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;/</span><span class="special">body</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">html</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><strong><code>layouts/homepage.shtml</code></strong></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">extend</span> <span class="attribute">template</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">base.shtml</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="special">title</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">title</span><span class="string">&quot;</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$site.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">title</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="special">body</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">main</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">h1</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">h1</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">div</span> <span class="attribute">:html</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.content()</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">body</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><strong><code>layouts/post.shtml</code></strong></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">extend</span> <span class="attribute">template</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">base.shtml</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="special">title</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">title</span><span class="string">&quot;</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$site.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">title</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="special">body</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">main</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">h1</span><span class="punctuation bracket">&gt;</span>Blog<span class="punctuation bracket">&lt;/</span><span class="special">h1</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">h2</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">h2</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">h3</span><span class="punctuation bracket">&gt;</span>by <span class="punctuation bracket">&lt;</span><span class="special">span</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.author</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">span</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">h3</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">h4</span><span class="punctuation bracket">&gt;</span>
    Posted on: 
    <span class="punctuation bracket">&lt;</span><span class="special">span</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.date.format(&apos;January 02, 2006&apos;)</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;/</span><span class="special">span</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;/</span><span class="special">h4</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">div</span> <span class="attribute">:html</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.content()</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">body</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>Let’s analyze what we just saw:</p><ul><li><p><code>layouts/templates/base.shtml</code> now contains all the main HTML boilerplate and has two <code>&lt;super&gt;</code> tags: one inside <code>&lt;title&gt;</code> and one inside <code>&lt;body&gt;</code> (both parent elements have also gained an <code>id</code> attribute).</p></li><li><p>both layouts now start with an <code>&lt;extend&gt;</code> tag and have lost their original structure (since it was collected in <code>base.shtml</code>), keeping only the parts that each defines differently than the other.</p></li></ul><h3><code>&lt;extend&gt;</code></h3><p>When a layout wants to extend a template, it must declare at the very top the template name using the extend tag, like so:</p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">extend</span> <span class="attribute">template</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">foo.shtml</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>A template that extends another won’t have a normal HTML structure, but rather it will be a list of HTML elements that will replace a correspoding super tag from the base template they’re extending.</p><h3><code>&lt;super&gt;</code></h3><p>The super tag defines an extension point in a template. The direct parent of a super tag must have an <code>id</code> attribute.</p><p><strong>Each top level element in a template that extends another must correspond to a super tag in the template being extended.</strong></p><p>Let’s call the “template that extends another” the <strong>super template</strong> (imagine that placing <code>&lt;super&gt;</code> in the code is like calling a <em>super template</em> for help).</p><p>Since super tags don’t have any id of their own, <strong>the <em>super template</em> uses the same tag and <code>id</code> of the parent element of each super tag to match its content with the correct super tag</strong>.</p><p><em><strong>template</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">title</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;</span><span class="tag">super</span><span class="punctuation bracket">&gt;</span> - Sample Site<span class="punctuation bracket">&lt;/</span><span class="special">title</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>layout</strong></em></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">title</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>Home<span class="punctuation bracket">&lt;/</span><span class="special">title</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>evaluates to</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">title</span> <span class="attribute">id</span>=&quot;<span class="string">title</span>&quot;<span class="punctuation bracket">&gt;</span>Home - Sample Site<span class="punctuation bracket">&lt;/</span><span class="tag">title</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<h4>Why not just give <code>id</code>s to super tags?</h4><p>Matching via parent elements is admittedly an uncommon choice, but it has some very real upsides over the alternatives.</p><p>Let’s define a block in a curly brace templating language (mustache, jinja, hugo, etc):</p><p><em><strong>hugo</strong></em></p><pre><code class="html">{{ define &quot;main&quot; }}
  <span class="punctuation bracket">&lt;</span><span class="tag">p</span><span class="punctuation bracket">&gt;</span> Hello World <span class="punctuation bracket">&lt;/</span><span class="tag">p</span><span class="punctuation bracket">&gt;</span>
{{ end }}
</code></pre>
<p>This is the equivalent of a top-level element in a Zine template that extends another template, but it has a critical disadvantage: <strong>you know nothing about where the content will be put</strong>.</p><p>Unless you have perfect recollection of what “main” is, you won’t know if your content should be framed in a container element or not. In fact, all the following declarations in a hugo base template are possible:</p><p><em><strong>ok</strong></em></p><pre><code class="html"><span class="constant">&lt;!DOCTYPE html&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="tag">html</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">head</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag">head</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">body</span><span class="punctuation bracket">&gt;</span>
    {{ block &quot;main&quot; . }}{{ end }}
  <span class="punctuation bracket">&lt;/</span><span class="tag">body</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag">html</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>oops, needed a <code>&lt;body&gt;</code> wrapper</strong></em></p><pre><code class="html"><span class="constant">&lt;!DOCTYPE html&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="tag">html</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">head</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag">head</span><span class="punctuation bracket">&gt;</span>
    {{ block &quot;main&quot; . }}{{ end }}
<span class="punctuation bracket">&lt;/</span><span class="tag">html</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><em><strong>oops, too many wrappers</strong></em></p><pre><code class="html"><span class="constant">&lt;!DOCTYPE html&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="tag">html</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">head</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag">head</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">body</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">p</span><span class="punctuation bracket">&gt;</span>{{ block &quot;main&quot; . }}{{ end }}<span class="punctuation bracket">&lt;/</span><span class="tag">p</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;/</span><span class="tag">body</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag">html</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>Contrast this with our previous example:</p><p><strong><code>layouts/homepage.shtml</code></strong></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">extend</span> <span class="attribute">template</span>=&quot;<span class="string">base.shtml</span>&quot;<span class="punctuation bracket">/&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="tag">title</span> <span class="attribute">id</span>=&quot;<span class="string">title</span>&quot; <span class="attribute">:text</span>=&quot;<span class="string">$site.title</span>&quot;<span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag">title</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="tag">body</span> <span class="attribute">id</span>=&quot;<span class="string">main</span>&quot;<span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">h1</span> <span class="attribute">:text</span>=&quot;<span class="string">$page.title</span>&quot;<span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag">h1</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">div</span> <span class="attribute">:html</span>=&quot;<span class="string">$page.content()</span>&quot;<span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag">body</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>By looking at the <em>super template</em> we know that we are putting content directly into the <code>body</code> element of the template we are extending.</p><p>In fact, if we were to make a mistake and define “main” as a <code>div</code> element in our layout, we would get a compile error:</p><p><strong><code>shell</code></strong></p><pre><code>$ zig build

---------- MISMATCHED BLOCK TAG ----------
The super template defines a block that has the wrong tag.
Both tags and ids must match in order to avoid confusion
about where the block contents are going to be placed in
the extended template.

note: super template block tag:
(post.shtml) layouts/post.shtml:19:2:
    &lt;div id=&quot;main&quot;&gt;
     ^^^

note: extended template block defined here:
(base.shtml) layouts/templates/base.shtml:16:4:
    &lt;body id=&quot;main&quot;&gt;
     ^^^^
trace:
    layout `post.shtml`,
    content `about.smd`.
</code></pre><p>So, if we were to give <code>id</code>s to super tags, we would have to introduce another fake html tag and we would end up with the same problem that curly brace templating languages have today.</p><p><em><strong>where would this go?</strong></em></p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">content</span> <span class="attribute">id</span>=&quot;<span class="string">main</span>&quot;<span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">p</span><span class="punctuation bracket">&gt;</span> Hello World <span class="punctuation bracket">&lt;/</span><span class="tag">p</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag">content</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>Repeating the parent element is a form of <em><strong>type safety</strong></em> for your templates, in a sense.</p><div class="block"><h1>Layout vs Template</h1><p>Throughout this document (and in error messages) there is a distinction being made between ‘layouts’ and ‘templates’.</p><p>In Zine a layout is a template that can be fully evaluated to a complete HTML file (i.e. it has no “extension placeholders” left).</p><p>The special name for those kinds of templates is used because they define a final, complete <em>layout</em> for a set of pages of the same kind.</p></div><h2>Extension chains</h2><p>In the previous section we saw how a template can extend another. We are now going to see what longer extension chains look like.</p><p>At this point it’s also useful to think of templates as documents that can do two things:</p><ul><li>Define an interface by using <code>&lt;super&gt;</code>.</li><li>Fulfill an interface by extending another template and definig top-level elements that match corresponding blocks in the template they extend.</li></ul><p>Let’s see an example:</p><p><strong><code>layouts/templates/base.shtml</code></strong></p><pre><code class="superhtml"><span class="constant">&lt;!DOCTYPE html&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="special">html</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="special">head</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">head</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">meta</span> <span class="attribute">charset</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">UTF-8</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">title</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;</span><span class="tag">super</span><span class="punctuation bracket">&gt;</span> - My Blog<span class="punctuation bracket">&lt;/</span><span class="special">title</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">super</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;/</span><span class="special">head</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="special">body</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">body</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">super</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;/</span><span class="special">body</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">html</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><strong><code>layouts/templates/with-menu.shtml</code></strong></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">extend</span> <span class="attribute">template</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">base.shtml</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="special">title</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;</span><span class="tag">super</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">title</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="special">head</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">head</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="special">script</span><span class="punctuation bracket">&gt;</span>console.log(&quot;Hello World!&quot;);<span class="punctuation bracket">&lt;/</span><span class="special">script</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">head</span><span class="punctuation bracket">&gt;</span>

<span class="comment">&lt;!-- at the top level only comments 
     and block definitions are allowed --&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="special">body</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">body</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">nav</span><span class="punctuation bracket">&gt;</span>
        <span class="punctuation bracket">&lt;</span><span class="special">a</span><span class="punctuation bracket">&gt;</span>Home<span class="punctuation bracket">&lt;/</span><span class="special">a</span><span class="punctuation bracket">&gt;</span>
        <span class="punctuation bracket">&lt;</span><span class="special">a</span><span class="punctuation bracket">&gt;</span>About<span class="punctuation bracket">&lt;/</span><span class="special">a</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;/</span><span class="special">nav</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;</span><span class="tag">div</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">content</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>
        <span class="punctuation bracket">&lt;</span><span class="tag">super</span><span class="punctuation bracket">&gt;</span>
    <span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="special">body</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p><strong><code>layouts/page.shtml</code></strong></p><pre><code class="superhtml"><span class="punctuation bracket">&lt;</span><span class="special">extend</span> <span class="attribute">template</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">with-menu.shtml</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="special">title</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">title</span><span class="string">&quot;</span> <span class="attribute">:text</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.title</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">title</span><span class="punctuation bracket">&gt;</span>

<span class="punctuation bracket">&lt;</span><span class="special">div</span> <span class="attribute">id</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">content</span><span class="string">&quot;</span> <span class="attribute">:html</span><span class="punctuation delimiter">=</span><span class="string">&quot;</span><span class="string">$page.content()</span><span class="string">&quot;</span><span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="special">div</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>Note how <code>with-menu.shtml</code> is both fulfilling the <em>interface</em> of <code>base.shtml</code> and at the same time it’s creating a <em>new interface</em> for another <em>super template</em> to fulfill in turn.</p><h2>Next Steps</h2><ul><li><a href="/docs/superhtml/scripty/">Read the SuperHTML Scripty Reference Documentation</a></li><li><a href="/docs/assets/">Learn more about Zine’s Asset System</a></li></ul></div>

    </div>
  </body>
</html>